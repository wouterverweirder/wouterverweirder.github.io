{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2007/09/30/flash-remoting-with-swx-and-cakephp/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.aboutme.be"}},"markdownRemark":{"id":"291165c8-085b-51d2-8161-26e82701175d","excerpt":"So, you want to learn how to create a sexy blog in flash, creating posts, comments, database storage, …? Are you afraid of spending hours writing complex…","html":"<p>So, you want to learn how to create a sexy blog in flash, creating posts, comments, database storage, …? Are you afraid of spending hours writing complex queries, parsing XML data or writing loads of php files? Don’t be, and see the power of <a href=\"http://www.cakephp.org\">cakephp</a> and <a href=\"http://swxformat.org\">SWX</a> combined. CakePHP being a rapid development framework for PHP and SWX, the native data format for the flash platform!<!--more--></p>\n<p>If you don’t have a running webserver with PHP + mysql + phpmyadmin yet, you’ll have to install these packages first.</p>\n<ul>\n<li>Windows users can <a href=\"http://www.wampserver.com/en/\">install WAMP</a>, which will install these packages at once on your development machine.</li>\n<li>Mac users can <a href=\"http://sourceforge.net/projects/mamp\">install MAMP</a>, which does the same (there is a MAMP bundle on swxformat, but we won’t use this one, as we’ll need to copy SWX to another directory anyway to work with cakephp).</li>\n</ul>\n<p>When you have your webserver set up, we’ll <a href=\"http://cakephp.org/downloads\">download the latest version of cakephp</a>. Unzip it to you webroot (WAMP default: C:\\wamp\\www – MAMP default: /Applications/MAMP/htdocs) and rename the unzipped directory to “flashblog”. You now have the following file structure:</p>\n<ul>\n<li>WWW</li>\n<li>flashblog</li>\n<li>app</li>\n<li>cake</li>\n<li>docs</li>\n<li>index.php</li>\n<li>vendors</li>\n</ul>\n<p>If you are deploying on a webserver, make sure the app/tmp/ directory and it’s subdirectories are writeable (chmod 777).</p>\n<p>After that, we’ll add <a href=\"/cakeswxphp\">cakeswxphp</a> to our cake install. <a href=\"/cakeswxphp\">Download cakeswxphp</a> and unzip it somewhere on your computer. Copy/Paste the content of the app and vendors dir of cakeswxphp to the same directories of your flashblog directory. If you did everything correctly, you can point your browser to: <a href=\"http://localhost/flashblog/explorer/\">http://localhost/flashblog/explorer/</a>. This opens the SWX Service Explorer. Set the amf path to <code class=\"language-text\">http://localhost/flashblog/amf.php</code> (default).</p>\n<p>This should give you an overview of the remoting services, which we can call via flash. Right now, the only service is amfphp/discovery_service…</p>\n<p>Now that we have cakephp &#x26; cakeswxphp installed, we will setup our database for our blog. Point your browser to the phpMyAdmin on your development machine (WAMP default: <a href=\"http://localhost/phpmyadmin\">http://localhost/phpmyadmin</a> – MAMP default: <a href=\"http://localhost/phpMyAdmin/\">http://localhost/phpMyAdmin/</a>).</p>\n<p>Using phpmyadmin, create a new database called “flashblog”.</p>\n<p><img src=\"/wp-content/uploads/2007/09/afbeelding-1.png\" alt=\"Create Database\" title=\"Create Database\"></p>\n<p>Execute the following SQL to create the tables for our blog:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CREATE TABLE `comments` (\n`id` INT(11) NOT NULL AUTO_INCREMENT,\n`created` datetime NOT NULL,\n`modified` datetime NOT NULL,\n`post_id` INT(11) NOT NULL,\n`nickname` VARCHAR(64) NOT NULL,\n`title` VARCHAR(64) NOT NULL,\n`content` text NOT NULL,\nPRIMARY KEY  (`id`)\n) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; CREATE TABLE `posts` (\n`id` INT(11) NOT NULL AUTO_INCREMENT,\n`created` datetime NOT NULL,\n`modified` datetime NOT NULL,\n`nickname` VARCHAR(64) NOT NULL,\n`title` VARCHAR(64) NOT NULL,\n`content` text NOT NULL,\nPRIMARY KEY  (`id`)\n) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;</code></pre></div>\n<p>That’s it, our database is set up! Now it is time to write our cakephp classes to work with our database…</p>\n<p>First of all, we need to tell cakephp how to access our database. Rename flashblog/app/config/database.php.default to database.php and open it in your favorite text/php editor. You can adjust the database configuration in the $default var in this file. In my case, it looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">var</span> <span class=\"token variable\">$default</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'driver'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'mysql'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'connect'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'mysql_connect'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'host'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'localhost'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'login'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'password'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'database'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'flashblog'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'prefix'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you point your browser to <a href=\"http://localhost/flashblog/\">http://localhost/flashblog/</a> you should get the message that cake is able to connect to the database. If not, check your database settings again in flashblog/app/config/database.php.</p>\n<p>So, we can connect to our database. Now we’ll define our post and comment models in php so that cakephp knows how to read and write posts and comments to the database. We could use the cake bake script to do this, but right now we’ll just write the code ourselves.</p>\n<p>First of all, we’ll adjust the default model. Create app_model.php in flashblog/app/ with the following contents:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">AppModel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">beforeSave</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                     <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                     <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">is_object</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_object_vars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">primaryKey</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">eval</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'$this->'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">primaryKey</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' =  $this->data[$this->name][$this->primaryKey];'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Now, we can define our post and comments models. Create a file called post.php in flashblog/app/models/:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Post</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppModel</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Post'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$hasMany</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'Comment'</span> <span class=\"token operator\">=></span>\n                <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'className'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Comment'</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token string single-quoted-string\">'foreignKey'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'post_id'</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token string single-quoted-string\">'dependent'</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">true</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Then, create comment.php in that same directory (flashblog/app/models/) :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Comment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppModel</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Comment'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$belongsTo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string single-quoted-string\">'Post'</span> <span class=\"token operator\">=></span>\n                <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'className'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Post'</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token string single-quoted-string\">'foreignKey'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'post_id'</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>CakePHP now knows how to read and write posts and related comments to the database! Next, we will create our remoting methods (cake controllers) which we will call from flash.</p>\n<p>Create posts_controller.php in flashblog/app/controllers:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">PostsController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Posts'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$uses</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Post'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Post</span><span class=\"token operator\">-></span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getPost</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Post</span><span class=\"token operator\">-></span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token constant\">null</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">savePost</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Post</span><span class=\"token operator\">-></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Post</span><span class=\"token operator\">-></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">deletePost</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Post</span><span class=\"token operator\">-></span><span class=\"token function\">del</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>Then, create the controller for our comments (flashblog/app/controller/comments_controller.php):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">CommentsController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'Comments'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> <span class=\"token variable\">$uses</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Comment'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">saveComment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$comment</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Comment</span><span class=\"token operator\">-></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$comment</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Comment</span><span class=\"token operator\">-></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">deleteComment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">Comment</span><span class=\"token operator\">-></span><span class=\"token function\">del</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>And here ends the PHP side of our flash blog. Let’s have some fun with Flash &#x26; ActionScript, shall we?</p>\n<p>Launch up flash and create a new fla (Actionscript 2). Save it somewhere as “flashblog.fla”. Now we’ll write the methods to read/write/delete blogposts and comments. SWX remoting doesn’t really need extra classes (you loadMovie your data), but using the classes makes you code a lot smaller and easier to write. So <a href=\"http://swxformat.org/download/\">download the SWX ActionScript library</a> and extract the “org” folder to the same directory as your flashblog.fla file.</p>\n<p>When you’ve got the org folder in the same folder as your flashblog.fla file, go back to your flashblog.fla file, select frame one and open the actions panel. We’ll start with importing the SWX class and setting up our gateway:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import org.swxformat.*;\nvar swx:SWX = new SWX();\nswx.gateway = \"http://localhost/flashblog/swx.php\";\nswx.encoding = \"POST\";</code></pre></div>\n<p>Now we can write our actionscript functions to communicate with our swx php classes. The following function sends a new post to our php class, which inserts it in the database:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/**\n* function to create a new post\n*/\nfunction createPost(nickname:String, title:String, content:String):Void{\n    var callDetails:Object = {\n        serviceClass: \"PostsController\",\n        method: \"savePost\",\n        args: [nickname, title, content],\n        result: [this, savePostResultHandler]\n    }\n    swx.call(callDetails);\n}\n/**\n* called when the post was saved\n*/\nfunction savePostResultHandler(resultObj:Object):Void{\n    trace(resultObj.result); //nr of saved post or false when failed\n}</code></pre></div>\n<p>That’s all it takes. No query writing. No XML parsing. No complex php files…<br>\nNow, let’s complete our actionscript code with the other functions to communicate with php:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//we import the SWX classes\nimport org.swxformat.*;\n//create a new SWX instance\nvar swx:SWX = new SWX();\n//location of the SWX gateway\nswx.gateway = \"http://localhost/flashblog/swx.php\";\n//we'll transfer data using POST.\nswx.encoding = \"POST\";\n/**\n*get all posts from the server\n*/\nfunction getPosts():Void{\n    var callDetails:Object = {\n        serviceClass: \"PostsController\",\n        method: \"getPosts\",\n        result: [this, getPostsResultHandler]\n    }\n    swx.call(callDetails);\n}\n/*\n* called when we receive the posts from the server\n*/\nfunction getPostsResultHandler(resultObj:Object):Void{\n    var posts_length:Number = resultObj.result.length;\n    for(var i:Number = ; i &lt; posts_length; i++){\n        var post:Object = resultObj.result[i];\n        trace(post.Post.title);\n        trace(post.Post.content);\n    }\n}\n/**\n*get a post with given id\n*/\nfunction getPost(id:Number):Void{\n    var callDetails:Object = {\n        serviceClass: \"PostsController\",\n        method: \"getPost\",\n        args: [id],\n        result: [this, getPostResultHandler]\n    }\n    swx.call(callDetails);\n}\n/*\n* called when we receive the posts from the server\n*/\nfunction getPostResultHandler(resultObj:Object):Void{\n    trace(resultObj.result.Post.title);\n    trace(resultObj.result.Comment);\n}\n/**\n* function to create a new post\n*/\nfunction createPost(nickname:String, title:String, content:String):Void{\n    var callDetails:Object = {\n        serviceClass: \"PostsController\",\n        method: \"savePost\",\n        args: [{Post: {nickname: nickname, title: title, content: content}}],\n        result: [this, savePostResultHandler]\n    }\n    swx.call(callDetails);\n}\n/**\n* function to edit a post\n*/\nfunction editPost(id:Number, nickname:String, title:String, content:String):Void{\n    var callDetails:Object = {\n        serviceClass: \"PostsController\",\n        method: \"savePost\",\n        args: [{Post: {id: id, nickname: nickname, title: title, content: content}}],\n        result: [this, savePostResultHandler]\n    }\n    swx.call(callDetails);\n}\n/**\n* called when the post was saved\n*/\nfunction savePostResultHandler(resultObj:Object):Void{\n    trace(resultObj.result); //nr of saved post or false when failed\n}\n/*\n* called when we receive the posts from the server\n*/\nfunction getPostResultHandler(resultObj:Object):Void{\n    trace(resultObj.result.Post.title);\n    var comments_length:Number = resultObj.result.Comment.length;\n    for(var i:Number = ; i &lt; comments_length; i++){\n        var comment:Object = resultObj.result.Comment[i];\n        trace(comment.title);\n        trace(comment.content);\n    }\n}\n/**\n*delete a post with given id\n*/\nfunction deletePost(id:Number):Void{\n    var callDetails:Object = {\n        serviceClass: \"PostsController\",\n        method: \"deletePost\",\n        args: [id],\n        result: [this, deletePostResultHandler]\n    }\n    swx.call(callDetails);\n}\n/*\n* called when we receive the posts from the server\n*/\nfunction deletePostResultHandler(resultObj:Object):Void{\n    trace(resultObj.result);\n}\n/**\n* function to create a new comment\n*/\nfunction createComment(post_id:Number, nickname:String, title:String, content:String):Void{\n    var callDetails:Object = {\n        serviceClass: \"CommentsController\",\n        method: \"saveComment\",\n        args: [{Comment: {post_id: post_id, nickname: nickname, title: title, content: content}}],\n        result: [this, saveCommentResultHandler]\n    }\n    swx.call(callDetails);\n}\n/**\n* function to edit a comment\n*/\nfunction editComment(id:Number, post_id:Number, nickname:String, title:String, content:String):Void{\n    var callDetails:Object = {\n        serviceClass: \"CommentsController\",\n        method: \"saveComment\",\n        args: [{Comment: {id: id, post_id: post_id, nickname: nickname, title: title, content: content}}],\n        result: [this, saveCommentResultHandler]\n    }\n    swx.call(callDetails);\n}\n/**\n* called when the comment was saved\n*/\nfunction saveCommentResultHandler(resultObj:Object):Void{\n    trace(resultObj.result); //nr of saved post or false when failed\n}\n/**\n*delete a comment with given id\n*/\nfunction deleteComment(id:Number):Void{\n    var callDetails:Object = {\n        serviceClass: \"CommentsController\",\n        method: \"deleteComment\",\n        args: [id],\n        result: [this, deleteCommentResultHandler]\n    }\n    swx.call(callDetails);\n}\n/*\n* called when we receive the posts from the server\n*/\nfunction deleteCommentResultHandler(resultObj:Object):Void{\n    trace(resultObj.result);\n}</code></pre></div>\n<p>You can test the functions by calling them manually through AS code. The next thing todo is create a gui to show posts, edit posts, etc. But that’s beyond the scope of this tutorial…</p>\n<p>Happy flashing!</p>","fields":{"slug":"/2007/09/30/flash-remoting-with-swx-and-cakephp/"},"frontmatter":{"title":"flash remoting with SWX and CakePHP","date":"30 Sep, 2007","description":false,"tags":["Actionscript 2.0","cakephp","cakeswxphp","Flash","swx"],"cover":{"publicURL":"/static/f5bbcc87bf2977903ac01027d5867455/preview.jpg","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAABAAID/9oADAMBAAIQAxAAAAHly1b5ZBVt+MMoJ//EABoQAAICAwAAAAAAAAAAAAAAAAECAxASIDH/2gAIAQEAAQUCsdmfOoyoZ2iYaf/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/ASn/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwEh/8QAHRABAAAGAwAAAAAAAAAAAAAAAQACEBEgIRJhcf/aAAgBAQAGPwLA066pecuQ8RPcf//EABwQAAEFAAMAAAAAAAAAAAAAABEAARAhMSBhcf/aAAgBAQABPyGcKd/EFWAWME4BjLE1rtx//9oADAMBAAIAAwAAABCn647/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QCGDJ/8QAFhEBAQEAAAAAAAAAAAAAAAAAEBEB/9oACAECAQE/EKbR/8QAHxABAQABAgcAAAAAAAAAAAAAARFBABAgITFRcZGx/9oACAEBAAE/ENInU2wOYsCs010daHt72Pj6Mtxk0FOAmq15SB94f//Z"},"images":{"fallback":{"src":"/static/f5bbcc87bf2977903ac01027d5867455/3c249/preview.jpg","srcSet":"/static/f5bbcc87bf2977903ac01027d5867455/3c249/preview.jpg 690w","sizes":"100vw"},"sources":[{"srcSet":"/static/f5bbcc87bf2977903ac01027d5867455/956b7/preview.avif 690w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/f5bbcc87bf2977903ac01027d5867455/37026/preview.webp 690w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1.3333333333333333}}}}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/2011/11/24/airserver-support-for-websocket-version-8/"},"frontmatter":{"title":"websocket version 8 support in AIR Server","tags":["Actionscript 3.0","AIR","Flash","html5"],"cover":{"publicURL":"/static/34da4946079a6b71be3cae1f24a2c3e6/preview.jpg","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe7lYFCFaAf/xAAWEAEBAQAAAAAAAAAAAAAAAAABIAD/2gAIAQEAAQUCacT/AP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CT//EABsQAAMAAgMAAAAAAAAAAAAAAAABERBBITFR/9oACAEBAAE/IRG9Efg8uuiNUhE+c//aAAwDAQACAAMAAAAQCAsM/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHxABAAICAgIDAAAAAAAAAAAAAQARITFBUWGBEJHR/9oACAEBAAE/EBTRg51AGEHeIcgfZ+Qi837gW7qu7l+SXBDe7ILYJ81AVo+ossZlV8f/2Q=="},"images":{"fallback":{"src":"/static/34da4946079a6b71be3cae1f24a2c3e6/3c249/preview.jpg","srcSet":"/static/34da4946079a6b71be3cae1f24a2c3e6/3c249/preview.jpg 690w","sizes":"100vw"},"sources":[{"srcSet":"/static/34da4946079a6b71be3cae1f24a2c3e6/956b7/preview.avif 690w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/34da4946079a6b71be3cae1f24a2c3e6/37026/preview.webp 690w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1.3333333333333333}}}}}},{"node":{"fields":{"slug":"/2011/07/04/source-code-for-airserver-space-game/"},"frontmatter":{"title":"Source code for airserver space game","tags":["Actionscript 3.0","AIR","Flash","html5"],"cover":{"publicURL":"/static/9ae6eb3539450f9885b2e707d28583d1/preview.jpg","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHttaEFhledljD/xAAYEAACAwAAAAAAAAAAAAAAAAAAIQIQMP/aAAgBAQABBQIY8I1//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFhAAAwAAAAAAAAAAAAAAAAAAEDAx/9oACAEBAAY/AhVf/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAECBRMXHw/9oACAEBAAE/IUdxbUA+dIQAPmAd4v/aAAwDAQACAAMAAAAQqA+w/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAIBAAAgIBAwUAAAAAAAAAAAAAAAERITFRYZEQQXGBof/aAAgBAQABPxC1teOKKFf4RqcoyTASUKkbC4GoKz7ai0oUPZG7ErGcZ6f/2Q=="},"images":{"fallback":{"src":"/static/9ae6eb3539450f9885b2e707d28583d1/3c249/preview.jpg","srcSet":"/static/9ae6eb3539450f9885b2e707d28583d1/3c249/preview.jpg 690w","sizes":"100vw"},"sources":[{"srcSet":"/static/9ae6eb3539450f9885b2e707d28583d1/956b7/preview.avif 690w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/9ae6eb3539450f9885b2e707d28583d1/37026/preview.webp 690w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1.3333333333333333}}}}}},{"node":{"fields":{"slug":"/2011/06/23/airserver-example-multi-user-smartphone-controlled-game/"},"frontmatter":{"title":"AIRServer example: multi-user smartphone controlled game","tags":["Actionscript 3.0","AIR","Flash","html5"],"cover":{"publicURL":"/static/bc9b0f461221908db5b4a7bf517db3d5/preview.jpg","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcPeNZsecIiBarR//8QAHBAAAgICAwAAAAAAAAAAAAAAAAECEQMQEhMh/9oACAEBAAEFAu2m86FkVeRlKSL2oNlss5M//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8BKf/EAB0QAAECBwAAAAAAAAAAAAAAAAABIQIRICIxUmH/2gAIAQEABj8C4WjpM2GhSvJ//8QAHBAAAgIDAQEAAAAAAAAAAAAAAAERITFBYVEQ/9oACAEBAAE/IVq54ehBUh9Rsl7I25SpsdpSsqSQ1HxFKR0JenUf/9oADAMBAAIAAwAAABBsK0//xAAWEQEBAQAAAAAAAAAAAAAAAAAAETH/2gAIAQMBAT8QxER//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAgEBPxCImKz/xAAeEAEAAgICAwEAAAAAAAAAAAABABEhMVFhEEFx8f/aAAgBAQABPxB3oK5COnmUk1auzHP1ld2K3gojwbUDyVByzi8gfZli22/sbBw+NfvbUxVaoHqk/Yn/2Q=="},"images":{"fallback":{"src":"/static/bc9b0f461221908db5b4a7bf517db3d5/3c249/preview.jpg","srcSet":"/static/bc9b0f461221908db5b4a7bf517db3d5/3c249/preview.jpg 690w","sizes":"100vw"},"sources":[{"srcSet":"/static/bc9b0f461221908db5b4a7bf517db3d5/956b7/preview.avif 690w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/bc9b0f461221908db5b4a7bf517db3d5/37026/preview.webp 690w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1.3333333333333333}}}}}}]}},"pageContext":{"slug":"/2007/09/30/flash-remoting-with-swx-and-cakephp/","previous":{"fields":{"slug":"/2007/09/22/cakeswxphp-updated-to-swx-version-101/"},"frontmatter":{"title":"CakeSWXPHP updated to SWX version 1.01","tags":["Actionscript 2.0","amfphp","cakephp","Flash","swx"]}},"next":{"fields":{"slug":"/2007/10/06/swx-contest/"},"frontmatter":{"title":"SWX contest","tags":["swx"]}},"tag":["Actionscript 2.0","cakephp","cakeswxphp","Flash","swx"]}},"staticQueryHashes":["2254173662","63159454"]}