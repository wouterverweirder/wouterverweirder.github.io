{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2006/09/20/extending-movieclip/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.aboutme.be"}},"markdownRemark":{"id":"13d6c015-1ea5-5ef3-859d-171ea38282cb","excerpt":"Have you ever tried extending the MovieClip class? The standard way is to create your actionscript class extending from MovieClip, adding a MovieClip symbol to…","html":"<p>Have you ever tried extending the MovieClip class? The standard way is to create your actionscript class extending from MovieClip, adding a MovieClip symbol to the library, setting a Linkage Identifier and specify the Actionscript 2 class. To create an instance of your class on the stage, you have to use attachMovie(). Problems of this method are: it requires a great deal of “work” to create class file, create library symbol &#x26; set it up and your code is more difficult to port between projects (recreate the library stuff in each projects). However, there are ways to extend MovieClip, without using the library directly.</p>\n<!--more-->\n<p><strong>classic way</strong></p>\n<p>We start with a basic MyRectangle class</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyRectangle</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">MovieClip</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> __width<span class=\"token punctuation\">:</span>Number<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> __height<span class=\"token punctuation\">:</span>Number<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token keyword\">set</span> <span class=\"token function\">width</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">:</span>Number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        __width <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token keyword\">get</span> <span class=\"token function\">width</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>Number <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> __width<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token keyword\">set</span> <span class=\"token function\">height</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">:</span>Number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        __height <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token keyword\">get</span> <span class=\"token function\">height</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>Number <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> __height<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">MyRectangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">trace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"created MyRectangle instance\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">onLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>Void <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">trace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loaded\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        __width <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> width <span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        __height <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> height <span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>Void <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">beginFill</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x000000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">endFill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To start, we use the classic way:</p>\n<ol>\n<li>create a new movieclip symbol in your library</li>\n<li>right click, choose linkage and fill in the linkage identifier &#x26; Actionscript 2 class (MyRectangle)</li>\n<li>drag an instance of the MyRectangle MovieClip on your stage</li>\n</ol>\n<p>By default, it will create a 100×100 rectangle on the stage. Notice the constructor and onLoad event and the order of (auto) execution when you run the swf…</p>\n<p><strong>getting rid of the library symbol</strong></p>\n<p>Now, we’re gonna get rid of the library symbol. We don’t want to create empty library symbols for each class extending MovieClip. We will use attachMovie to create an instance of our MyRectangle class. However, as we don’t have a linked library item, we can’t use attachMovie… or can we?</p>\n<p>When a linked class is compiled into the swf, it gets a linkage name of “__Packages.” followed by the full package name and class name. We can do this trough code aswell! By linking that linkage name to the class constructor, using Object.registerClass, we can use attachMovie again…</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyRectangle</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">MovieClip</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> symbolName<span class=\"token punctuation\">:</span>String <span class=\"token operator\">=</span> <span class=\"token string\">\"__Packages.MyRectangle\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> symbolOwner<span class=\"token punctuation\">:</span>Function <span class=\"token operator\">=</span> MyRectangle<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">var</span> symbolLinked <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">registerClass</span><span class=\"token punctuation\">(</span>symbolName<span class=\"token punctuation\">,</span> symbolOwner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> __width<span class=\"token punctuation\">:</span>Number<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> __height<span class=\"token punctuation\">:</span>Number<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We now use attachMovie on our main timeline to create an instance of our rectangle class:</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">attachMovie</span><span class=\"token punctuation\">(</span>MyRectangle<span class=\"token punctuation\">.</span>symbolName<span class=\"token punctuation\">,</span> <span class=\"token string\">\"rectangle_mc\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNextHighestDepth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Hooray! We don’t have a library item anymore! But I still don’t like the attachMovie outside of our class. Instead, you could write a static create method, that does the attachMovie and returns an instance of our MyRectangle. You could also <a href=\"/2006/09/12/passing-arguments-through-parameter-objects/\">pass a parameter object</a> to the function…</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">container<span class=\"token punctuation\">:</span>MovieClip<span class=\"token punctuation\">,</span> initObj<span class=\"token punctuation\">:</span>Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>MyRectangle<span class=\"token punctuation\">{</span>\n    container<span class=\"token punctuation\">.</span><span class=\"token function\">attachMovie</span><span class=\"token punctuation\">(</span>symbolName<span class=\"token punctuation\">,</span> <span class=\"token string\">\"rectangle_mc\"</span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">.</span><span class=\"token function\">getNextHighestDepth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> initObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">MyRectangle</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">[</span><span class=\"token string\">\"rectangle_mc\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To create a rectangle, you could use:</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\"><span class=\"token keyword\">var</span> rect <span class=\"token operator\">=</span> MyRectangle<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>_x<span class=\"token punctuation\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> _y<span class=\"token punctuation\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Using this method, you could create classes extending from eachother and MovieClip as the root class. I’m thinking about adding eventdispatching to all your MovieClips, basic animations (flyTo(x,y)),…</p>\n<p>Enjoy!</p>","fields":{"slug":"/2006/09/20/extending-movieclip/"},"frontmatter":{"title":"extending MovieClip","date":"20 Sep, 2006","description":false,"tags":["Actionscript 2.0"],"hasCover":false,"cover":{"publicURL":"/static/38bf334212404fb8f25838f80898b83a/preview.png","childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='62'%20height='62'%20viewBox='0%200%2062%2062'%20preserveAspectRatio='none'/%3e","aspectRatio":0.7493606138107417,"src":"/static/38bf334212404fb8f25838f80898b83a/21b0e/preview.png","srcSet":"/static/38bf334212404fb8f25838f80898b83a/12aff/preview.png 293w,\n/static/38bf334212404fb8f25838f80898b83a/8dd70/preview.png 585w,\n/static/38bf334212404fb8f25838f80898b83a/21b0e/preview.png 690w","srcWebp":"/static/38bf334212404fb8f25838f80898b83a/f3dc3/preview.webp","srcSetWebp":"/static/38bf334212404fb8f25838f80898b83a/05ceb/preview.webp 293w,\n/static/38bf334212404fb8f25838f80898b83a/5c538/preview.webp 585w,\n/static/38bf334212404fb8f25838f80898b83a/f3dc3/preview.webp 690w","sizes":"(max-width: 690px) 100vw, 690px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/2008/12/23/cakeswxphp-updated-to-swx-20-beta-1/"},"frontmatter":{"title":"CakeSWXPHP – updated to SWX 2.0 beta 1","tags":["Actionscript 2.0","Actionscript 3.0","amfphp","cakephp","cakeswxphp","swx"],"cover":{"publicURL":"/static/38bf334212404fb8f25838f80898b83a/preview.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAAFklEQVQoz2P4T2XAMGrgqIGjBg6EgQDPpbxuORFYHwAAAABJRU5ErkJggg==","aspectRatio":1.6901408450704225,"src":"/static/38bf334212404fb8f25838f80898b83a/c0ead/preview.png","srcSet":"/static/38bf334212404fb8f25838f80898b83a/3ddd7/preview.png 120w,\n/static/38bf334212404fb8f25838f80898b83a/bab64/preview.png 240w,\n/static/38bf334212404fb8f25838f80898b83a/c0ead/preview.png 480w,\n/static/38bf334212404fb8f25838f80898b83a/608b8/preview.png 690w","srcWebp":"/static/38bf334212404fb8f25838f80898b83a/1f47d/preview.webp","srcSetWebp":"/static/38bf334212404fb8f25838f80898b83a/504a6/preview.webp 120w,\n/static/38bf334212404fb8f25838f80898b83a/36764/preview.webp 240w,\n/static/38bf334212404fb8f25838f80898b83a/1f47d/preview.webp 480w,\n/static/38bf334212404fb8f25838f80898b83a/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}},{"node":{"fields":{"slug":"/2007/10/14/swx-explorer-with-code-generation/"},"frontmatter":{"title":"SWX explorer with code generation","tags":["Actionscript 2.0","Flex","swx"],"cover":{"publicURL":"/static/38bf334212404fb8f25838f80898b83a/preview.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAAFklEQVQoz2P4T2XAMGrgqIGjBg6EgQDPpbxuORFYHwAAAABJRU5ErkJggg==","aspectRatio":1.6901408450704225,"src":"/static/38bf334212404fb8f25838f80898b83a/c0ead/preview.png","srcSet":"/static/38bf334212404fb8f25838f80898b83a/3ddd7/preview.png 120w,\n/static/38bf334212404fb8f25838f80898b83a/bab64/preview.png 240w,\n/static/38bf334212404fb8f25838f80898b83a/c0ead/preview.png 480w,\n/static/38bf334212404fb8f25838f80898b83a/608b8/preview.png 690w","srcWebp":"/static/38bf334212404fb8f25838f80898b83a/1f47d/preview.webp","srcSetWebp":"/static/38bf334212404fb8f25838f80898b83a/504a6/preview.webp 120w,\n/static/38bf334212404fb8f25838f80898b83a/36764/preview.webp 240w,\n/static/38bf334212404fb8f25838f80898b83a/1f47d/preview.webp 480w,\n/static/38bf334212404fb8f25838f80898b83a/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}},{"node":{"fields":{"slug":"/2007/09/30/flash-remoting-with-swx-and-cakephp/"},"frontmatter":{"title":"flash remoting with SWX and CakePHP","tags":["Actionscript 2.0","cakephp","cakeswxphp","Flash","swx"],"cover":{"publicURL":"/static/38bf334212404fb8f25838f80898b83a/preview.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAAFklEQVQoz2P4T2XAMGrgqIGjBg6EgQDPpbxuORFYHwAAAABJRU5ErkJggg==","aspectRatio":1.6901408450704225,"src":"/static/38bf334212404fb8f25838f80898b83a/c0ead/preview.png","srcSet":"/static/38bf334212404fb8f25838f80898b83a/3ddd7/preview.png 120w,\n/static/38bf334212404fb8f25838f80898b83a/bab64/preview.png 240w,\n/static/38bf334212404fb8f25838f80898b83a/c0ead/preview.png 480w,\n/static/38bf334212404fb8f25838f80898b83a/608b8/preview.png 690w","srcWebp":"/static/38bf334212404fb8f25838f80898b83a/1f47d/preview.webp","srcSetWebp":"/static/38bf334212404fb8f25838f80898b83a/504a6/preview.webp 120w,\n/static/38bf334212404fb8f25838f80898b83a/36764/preview.webp 240w,\n/static/38bf334212404fb8f25838f80898b83a/1f47d/preview.webp 480w,\n/static/38bf334212404fb8f25838f80898b83a/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}}]}},"pageContext":{"slug":"/2006/09/20/extending-movieclip/","previous":{"fields":{"slug":"/2006/09/12/passing-arguments-through-parameter-objects/"},"frontmatter":{"title":"Passing arguments through parameter objects","tags":["Actionscript 2.0"]}},"next":{"fields":{"slug":"/2006/09/27/web-20/"},"frontmatter":{"title":"Web 2.0","tags":["Uncategorized"]}},"tag":["Actionscript 2.0"]}}}