{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2011/12/15/airserver-0-4-udp-handling-chrome-16-websockets-bugfixes/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.aboutme.be"}},"markdownRemark":{"id":"b9353287-6d44-5f21-a24d-51ce62f6e443","excerpt":"I’ve just finished some updates on my AIRServer library, which enables you to create an AIR app that listens for different inputs such as sockets, websockets…","html":"<p>I’ve just finished some updates on my AIRServer library, which enables you to create an AIR app that listens for different inputs such as sockets, websockets and P2P traffic. This gives you the option to create a multi-user game, with different input controllers.</p>\n<p>I’ve added a UDP Endpoint, so you can handle UDP traffic aswell now (<a href=\"/2011/12/14/udp-native-extension-for-air-mobile-now-with-android-support/\" title=\"UDP native extension for air mobile\">check out the UDP native extension for AIR mobile, to use UDP on mobile devices</a>). UDP is connectionless, so you can specify a timeout, when we mark a “udp client” as disconnected.</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\">server<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">UDPEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token number\">1236</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NativeObjectSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When you want to send data back over UDP, you’ll need to know the UDP listening port of the client: therefore, the client can send a “PORT” command, with the listening port as data argument:</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\"><span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">{</span>\n    listeningSocket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DatagramSocket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    listeningSocket<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>DatagramSocketDataEvent<span class=\"token punctuation\">.</span><span class=\"token constant\">DATA</span><span class=\"token punctuation\">,</span> socketDataHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">listeningSocket</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">9876</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    listeningSocket<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n    sendingSocket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DatagramSocket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    sendingSocket<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">int</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    currentState <span class=\"token operator\">=</span> <span class=\"token string\">\"connected\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token function\">sendObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>command<span class=\"token punctuation\">:</span> <span class=\"token string\">\"PORT\"</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">:</span> listeningSocket<span class=\"token punctuation\">.</span>localPort<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">sendObject</span><span class=\"token punctuation\">(</span>inputField<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    inputField<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sendObject</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">:</span>Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> bytes<span class=\"token punctuation\">:</span>ByteArray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ByteArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bytes<span class=\"token punctuation\">.</span><span class=\"token function\">writeObject</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    sendingSocket<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I’ve also made some arguments optional (such as the message serializers). By default, an AMF endpoint will use a NativeObjectSerializer, websockets will use the JSONSerializer.</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\">server<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SocketEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token number\">1234</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AMFSocketClientHandlerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SocketEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token number\">1235</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebSocketClientHandlerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">UDPEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token number\">1236</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NativeObjectSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CocoonP2PEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"be.aboutme.airserver.demos.Messages\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>I’ve fixed some issues with multiple-messages in one packet. This was especially a problem with the websocket listener. The object serializer is now responsible for splitting the input into multiple messages (when necessary). By default, the JSONSerializer used for the websockets, will split messages on the newline (\\n) character. Make sure you terminate each message you send from the client with this character, and you should be good to go.</p>\n<p><del datetime=\"2011-12-23T16:56:07+00:00\"><a href=\"http://labs.aboutme.be/airserver/airserver-0.4.zip\" title=\"Download sources\">As always, you can download the sources &#x26; updated demos to play with</a>. Happy coding!</del></p>\n<p><a href=\"https://github.com/wouterverweirder/AIR-Server\" title=\"Sources on Github\">You can find the latest version on github</a></p>","fields":{"slug":"/2011/12/15/airserver-0-4-udp-handling-chrome-16-websockets-bugfixes/"},"frontmatter":{"title":"AIRServer 0.4 – UDP Handling, Chrome 16 websockets & bugfixes","date":"15 Dec, 2011","description":false,"tags":["AIR","AIRServer","html5","P2P","sockets","websockets"],"hasCover":true,"cover":{"publicURL":"/static/3b61ad296da65598fa0cd9d3e416637f/preview.jpg","childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='62'%20height='62'%20viewBox='0%200%2062%2062'%20preserveAspectRatio='none'%3e%3cpath%20d='M5%2030v11h13c10%200%2011%200%204-1-6%200-8%200-8-2l7-1%206-1-7-1h-7l3-1c4%200%204-2%200-2-2-1-1-1%202-1%207%200%208-2%201-2l6-1c13%200%2017-2%205-2-4%200-6%200-5-1l2-2%2015-1%2015-1-35-1-17-1v11m0%2029l26%201%2026-1-26-1-26%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":0.7493606138107417,"src":"/static/3b61ad296da65598fa0cd9d3e416637f/d6678/preview.jpg","srcSet":"/static/3b61ad296da65598fa0cd9d3e416637f/40917/preview.jpg 293w,\n/static/3b61ad296da65598fa0cd9d3e416637f/3c0b6/preview.jpg 585w,\n/static/3b61ad296da65598fa0cd9d3e416637f/d6678/preview.jpg 690w","srcWebp":"/static/3b61ad296da65598fa0cd9d3e416637f/f3dc3/preview.webp","srcSetWebp":"/static/3b61ad296da65598fa0cd9d3e416637f/05ceb/preview.webp 293w,\n/static/3b61ad296da65598fa0cd9d3e416637f/5c538/preview.webp 585w,\n/static/3b61ad296da65598fa0cd9d3e416637f/f3dc3/preview.webp 690w","sizes":"(max-width: 690px) 100vw, 690px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/2012/02/29/fitc-amsterdam-slides-demo-videos-of-opencv-finger-tracking-air-native-extensions/"},"frontmatter":{"title":"FITC Amsterdam – slides & demo videos of opencv & finger tracking air native extensions","tags":["AIR","air native extension","airkinect","finger tracking","fitc","fitc amsterdam 2012","opencv"],"cover":{"publicURL":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/preview.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHZSsCown//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIREP/aAAgBAQABBQIT2uROM//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAABECH/2gAIAQEABj8CGsrn/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERMVEQ/9oACAEBAAE/IYPYJJx6QlEau+f/2gAMAwEAAgADAAAAEIw//8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAEDAQE/EIGf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQEBAAMAAAAAAAAAAAAAAQARMSFB4f/aAAgBAQABPxAhaB4aLGYGPuSR0p5PHfk9v//Z","aspectRatio":1.6901408450704225,"src":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/9da5a/preview.jpg","srcSet":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/6e6c3/preview.jpg 120w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/ef489/preview.jpg 240w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/9da5a/preview.jpg 480w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/9f916/preview.jpg 690w","srcWebp":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/1f47d/preview.webp","srcSetWebp":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/504a6/preview.webp 120w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/36764/preview.webp 240w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/1f47d/preview.webp 480w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}},{"node":{"fields":{"slug":"/2012/01/13/access-the-mac-sudden-motion-sensor-with-an-air-native-extension/"},"frontmatter":{"title":"Access the mac sudden motion sensor with an AIR native extension","tags":["accelerometer","AIR","native extension","OSX","sudden motion sensor"],"cover":{"publicURL":"/static/eacb22b7ae25c87ddca89cb5fee3052d/preview.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuz0qF5gT/xAAZEAADAQEBAAAAAAAAAAAAAAABAgMAEBH/2gAIAQEAAQUCY+CVS7Y5ZonP/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAEDAQE/AWGf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhABAAIDAQAAAAAAAAAAAAAAARARAAIhIv/aAAgBAQAGPwJcpK5PnUI//8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAEDFRYXH/2gAIAQEAAT8h6MDnJGbQMI5DD8kV/9oADAMBAAIAAwAAABAMz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxABCbP/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QR2f/xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMRBBUf/aAAgBAQABPxD2beL2FyAtqxMRCWR0jrwTgKER4mWRkjq1iv1z/9k=","aspectRatio":1.6901408450704225,"src":"/static/eacb22b7ae25c87ddca89cb5fee3052d/9da5a/preview.jpg","srcSet":"/static/eacb22b7ae25c87ddca89cb5fee3052d/6e6c3/preview.jpg 120w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/ef489/preview.jpg 240w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/9da5a/preview.jpg 480w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/9f916/preview.jpg 690w","srcWebp":"/static/eacb22b7ae25c87ddca89cb5fee3052d/1f47d/preview.webp","srcSetWebp":"/static/eacb22b7ae25c87ddca89cb5fee3052d/504a6/preview.webp 120w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/36764/preview.webp 240w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/1f47d/preview.webp 480w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}},{"node":{"fields":{"slug":"/2012/01/07/accessing-the-kinect-in-javascript-through-websockets/"},"frontmatter":{"title":"Accessing the kinect in javascript through websockets","tags":["AIR","airkinect","AIRServer","as3nui","canvas","html5","js","kinect","threejs"],"cover":{"publicURL":"/static/283803d2c53ef9765825374d2c3a8366/preview.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHcjcCGH//EABYQAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAQABBQJhl//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgQf/aAAgBAQAGPwIq/wD/xAAcEAABAwUAAAAAAAAAAAAAAAAAARGRICExQWH/2gAIAQEAAT8htXcD8gYKP//aAAwDAQACAAMAAAAQgA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEgIUFR0f/aAAgBAQABPxB06VnCYE9M0s6w/9k=","aspectRatio":1.6901408450704225,"src":"/static/283803d2c53ef9765825374d2c3a8366/9da5a/preview.jpg","srcSet":"/static/283803d2c53ef9765825374d2c3a8366/6e6c3/preview.jpg 120w,\n/static/283803d2c53ef9765825374d2c3a8366/ef489/preview.jpg 240w,\n/static/283803d2c53ef9765825374d2c3a8366/9da5a/preview.jpg 480w,\n/static/283803d2c53ef9765825374d2c3a8366/9f916/preview.jpg 690w","srcWebp":"/static/283803d2c53ef9765825374d2c3a8366/1f47d/preview.webp","srcSetWebp":"/static/283803d2c53ef9765825374d2c3a8366/504a6/preview.webp 120w,\n/static/283803d2c53ef9765825374d2c3a8366/36764/preview.webp 240w,\n/static/283803d2c53ef9765825374d2c3a8366/1f47d/preview.webp 480w,\n/static/283803d2c53ef9765825374d2c3a8366/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}}]}},"pageContext":{"slug":"/2011/12/15/airserver-0-4-udp-handling-chrome-16-websockets-bugfixes/","previous":{"fields":{"slug":"/2011/12/14/udp-native-extension-for-air-mobile-now-with-android-support/"},"frontmatter":{"title":"UDP Native Extension for AIR Mobile – now with Android Support!","tags":["AIR","android","iOS","native extensions"]}},"next":{"fields":{"slug":"/2011/12/23/airserver-0-5-socket-byte-concatenation/"},"frontmatter":{"title":"AIRServer 0.5 – socket byte concatenation","tags":["AIR","AIRServer","html5","P2P","sockets","websockets"]}},"tag":["AIR","AIRServer","html5","P2P","sockets","websockets"]}}}