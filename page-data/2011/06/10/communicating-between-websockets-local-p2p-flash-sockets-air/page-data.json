{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2011/06/10/communicating-between-websockets-local-p2p-flash-sockets-air/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://blog.aboutme.be"}},"markdownRemark":{"id":"c3e92d0d-d32a-5bbe-aa3e-4282e30b3b35","excerpt":"I’ve shown you how to handle websockets in adobe air, and how to set up communication between flash sockets, websockets and adobe air using a library I wrote. I…","html":"<p>I’ve shown you <a href=\"/2011/06/07/handling-websocket-connections-with-adobe-air-serversocket/\">how to handle websockets in adobe air</a>, and how to <a href=\"/2011/06/09/airserver-handling-both-sockets-websockets-in-adobe-air/\">set up communication between flash sockets, websockets and adobe air</a> using a library I wrote. I’ve extended the library with support for local P2P, using <a href=\"http://code.google.com/p/cocoon-p2p/\">Cocoon P2P</a>.</p>\n<!--more-->\n<p>It’s another option to create a multiuser game with different inputs. Right now you can use flash sockets, websockets and rtmfp (P2P) connectivity in a mixed environment to communicate with eachother.</p>\n<div class=\"gatsby-highlight\" data-language=\"actionscript\"><pre class=\"language-actionscript\"><code class=\"language-actionscript\">server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AIRServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//adding endpoints</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SocketEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token number\">1234</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AMFSocketClientHanderFactory</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NativeObjectSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SocketEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token number\">1235</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebSocketClientHandlerFactory</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">JSONSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CocoonP2PEndPoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"be.aboutme.airserver.demos.Messages\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//add event listeners</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>AIRServerEvent<span class=\"token punctuation\">.</span><span class=\"token constant\">CLIENT_ADDED</span><span class=\"token punctuation\">,</span> clientAddedHandler<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>AIRServerEvent<span class=\"token punctuation\">.</span><span class=\"token constant\">CLIENT_REMOVED</span><span class=\"token punctuation\">,</span> clientRemovedHandler<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>MessageReceivedEvent<span class=\"token punctuation\">.</span><span class=\"token constant\">MESSAGE_RECEIVED</span><span class=\"token punctuation\">,</span> messageReceivedHandler<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//start the server</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Adding a cocoon endpoint, is even simpler than adding socket endpoints, all you have to do is pass an instance of the CocoonP2PEndpoint class to the addEndpoint function of the server, and specify a groupname for the P2P netgroup. You can handle the messages just like any other message on the server, it doesn’t matter if the message comes from a socket, websocket or via rtmfp.</p>\n<p><del datetime=\"2011-11-24T19:33:18+00:00\">You can <a href=\"http://labs.aboutme.be/airserver/airserver-0.2.zip\">download an updated version of the library project</a> and an updated version of the demo’s with a cocoon P2P client. </del>Big thanks to <a href=\"http://www.peterelst.com\">Peter Elst</a> for CocoonP2P, it makes P2P on the local network a lot easier to implement!</p>\n<p><a href=\"https://github.com/wouterverweirder/AIR-Server\">You can find the latest version on github</a></p>","fields":{"slug":"/2011/06/10/communicating-between-websockets-local-p2p-flash-sockets-air/"},"frontmatter":{"title":"Communicating between websockets, local P2P, flash sockets & AIR","date":"10 Jun, 2011","description":false,"tags":["Actionscript 3.0","AIR","html5"],"hasCover":true,"cover":{"publicURL":"/static/d968300beefe2242b831f8569ad985f6/preview.jpg","childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='62'%20height='62'%20viewBox='0%200%2062%2062'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%2031v31h63V0H0v31m14-19c4%201%206%203%202%203-2%200-2%200-2%203l-1%203-1-1h-2c-1-1-1%202-1%206v7h5c3%200%204%200%204%202l2%201c2%200%202%201%202%205l1%205%2011-1c15%200%2015%200%2016-2%200-2%200-2-2-1l-3-1-8-1h-6l6-1%208-1h4c4%202%204%202%204-18%200-2%200-2-12-2-18%200-23%200-19-1l3-1h-4l-3-1h5l6-1%204-2h-3l-9%201-2-1c1-1%200-1-4-1s-4%200-1%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":0.7493606138107417,"src":"/static/d968300beefe2242b831f8569ad985f6/d6678/preview.jpg","srcSet":"/static/d968300beefe2242b831f8569ad985f6/40917/preview.jpg 293w,\n/static/d968300beefe2242b831f8569ad985f6/3c0b6/preview.jpg 585w,\n/static/d968300beefe2242b831f8569ad985f6/d6678/preview.jpg 690w","srcWebp":"/static/d968300beefe2242b831f8569ad985f6/f3dc3/preview.webp","srcSetWebp":"/static/d968300beefe2242b831f8569ad985f6/05ceb/preview.webp 293w,\n/static/d968300beefe2242b831f8569ad985f6/5c538/preview.webp 585w,\n/static/d968300beefe2242b831f8569ad985f6/f3dc3/preview.webp 690w","sizes":"(max-width: 690px) 100vw, 690px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/2012/02/29/fitc-amsterdam-slides-demo-videos-of-opencv-finger-tracking-air-native-extensions/"},"frontmatter":{"title":"FITC Amsterdam – slides & demo videos of opencv & finger tracking air native extensions","tags":["AIR","air native extension","airkinect","finger tracking","fitc","fitc amsterdam 2012","opencv"],"cover":{"publicURL":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/preview.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHsmwC2pP/EABgQAAMBAQAAAAAAAAAAAAAAAAABAhEQ/9oACAEBAAEFAhPa5M4z/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAQAGPwIayuf/xAAZEAADAQEBAAAAAAAAAAAAAAAAARFRECH/2gAIAQEAAT8hg9h4WEJRUF3n/9oADAMBAAIAAwAAABDcP//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAwEBPxCBn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEBAQEBAAAAAAAAAAAAAAEAETEh4f/aAAgBAQABPxAhahcNKszAx4z2tKenjvyb/9k=","aspectRatio":1.6901408450704225,"src":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/9da5a/preview.jpg","srcSet":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/6e6c3/preview.jpg 120w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/ef489/preview.jpg 240w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/9da5a/preview.jpg 480w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/9f916/preview.jpg 690w","srcWebp":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/1f47d/preview.webp","srcSetWebp":"/static/c54a46e8e74c3f7aa8d408c94b6f1640/504a6/preview.webp 120w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/36764/preview.webp 240w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/1f47d/preview.webp 480w,\n/static/c54a46e8e74c3f7aa8d408c94b6f1640/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}},{"node":{"fields":{"slug":"/2012/01/13/access-the-mac-sudden-motion-sensor-with-an-air-native-extension/"},"frontmatter":{"title":"Access the mac sudden motion sensor with an AIR native extension","tags":["accelerometer","AIR","native extension","OSX","sudden motion sensor"],"cover":{"publicURL":"/static/eacb22b7ae25c87ddca89cb5fee3052d/preview.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuzVLFpgn/xAAZEAEAAwEBAAAAAAAAAAAAAAACAAEDEBH/2gAIAQEAAQUCV+HLS2pcII5//8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAEDAQE/AWGf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxABAAEFAQAAAAAAAAAAAAAAARAAAhEiQXH/2gAIAQEABj8CWsJydbQ8j//EABsQAAIDAAMAAAAAAAAAAAAAAAERABAxIWGR/9oACAEBAAE/IeiA4mMa4NAwjkPeSr//2gAMAwEAAgADAAAAEE8P/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EAEJs//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxBHZ//EABsQAQEAAwADAAAAAAAAAAAAAAERACExEEFR/9oACAEBAAE/EPdd4XsLm8RVogiEvHSc8EwChEeJlYskUTWb+uf/2Q==","aspectRatio":1.6901408450704225,"src":"/static/eacb22b7ae25c87ddca89cb5fee3052d/9da5a/preview.jpg","srcSet":"/static/eacb22b7ae25c87ddca89cb5fee3052d/6e6c3/preview.jpg 120w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/ef489/preview.jpg 240w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/9da5a/preview.jpg 480w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/9f916/preview.jpg 690w","srcWebp":"/static/eacb22b7ae25c87ddca89cb5fee3052d/1f47d/preview.webp","srcSetWebp":"/static/eacb22b7ae25c87ddca89cb5fee3052d/504a6/preview.webp 120w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/36764/preview.webp 240w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/1f47d/preview.webp 480w,\n/static/eacb22b7ae25c87ddca89cb5fee3052d/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}},{"node":{"fields":{"slug":"/2012/01/07/accessing-the-kinect-in-javascript-through-websockets/"},"frontmatter":{"title":"Accessing the kinect in javascript through websockets","tags":["AIR","airkinect","AIRServer","as3nui","canvas","html5","js","kinect","threejs"],"cover":{"publicURL":"/static/283803d2c53ef9765825374d2c3a8366/preview.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuV2EA/8QAFRABAQAAAAAAAAAAAAAAAAAAASD/2gAIAQEAAQUCa//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgQf/aAAgBAQAGPwIq/wD/xAAcEAABAwUAAAAAAAAAAAAAAAABABExICFhgZH/2gAIAQEAAT8htMHQT44QgUf/2gAMAwEAAgADAAAAEADP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAISBBUdH/2gAIAQEAAT8QNNjGwwL75V3MP//Z","aspectRatio":1.6901408450704225,"src":"/static/283803d2c53ef9765825374d2c3a8366/9da5a/preview.jpg","srcSet":"/static/283803d2c53ef9765825374d2c3a8366/6e6c3/preview.jpg 120w,\n/static/283803d2c53ef9765825374d2c3a8366/ef489/preview.jpg 240w,\n/static/283803d2c53ef9765825374d2c3a8366/9da5a/preview.jpg 480w,\n/static/283803d2c53ef9765825374d2c3a8366/9f916/preview.jpg 690w","srcWebp":"/static/283803d2c53ef9765825374d2c3a8366/1f47d/preview.webp","srcSetWebp":"/static/283803d2c53ef9765825374d2c3a8366/504a6/preview.webp 120w,\n/static/283803d2c53ef9765825374d2c3a8366/36764/preview.webp 240w,\n/static/283803d2c53ef9765825374d2c3a8366/1f47d/preview.webp 480w,\n/static/283803d2c53ef9765825374d2c3a8366/26a56/preview.webp 690w","sizes":"(max-width: 480px) 100vw, 480px"}}}}}}]}},"pageContext":{"slug":"/2011/06/10/communicating-between-websockets-local-p2p-flash-sockets-air/","previous":{"fields":{"slug":"/2011/06/09/airserver-handling-both-sockets-websockets-in-adobe-air/"},"frontmatter":{"title":"AIRServer – handling both sockets & websockets in Adobe AIR","tags":["Actionscript 3.0","AIR","html5"]}},"next":{"fields":{"slug":"/2011/06/23/airserver-example-multi-user-smartphone-controlled-game/"},"frontmatter":{"title":"AIRServer example: multi-user smartphone controlled game","tags":["Actionscript 3.0","AIR","Flash","html5"]}},"tag":["Actionscript 3.0","AIR","html5"]}},"staticQueryHashes":["2620024091","63159454"]}